#ifdef __unix__
#include<SDL/SDL.h>
#include<SDL/SDL_image.h>
#else
#include <SDL.h>
#include <SDL_image.h>
#endif

#include <iostream>
#include <time.h>

#ifndef SPIELFELD_H_INCLUDED
#define SPIELFELD_H_INCLUDED


class Spielfeld {
    private:
        SDL_Surface *bild;
    public:
        Spielfeld(char*);
        bool free(int x, int y);    // Testet ob die Zelle frei ist
        void zeichnen(SDL_Surface *surf);
        char spielfeld[24][26] = {      //Pixel: 768, 832
            {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
            {'#', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '#'},
            {'#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '#', '#', '_', '#'},
            {'#', '_', '#', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '#', '_', '_', '#', '_', '#'},
            {'#', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '#'},
            {'#', '_', '#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '_', '#', '#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '_', '#'},
            {'#', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '#', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '#', '_', '#'},
            {'#', '_', '_', '_', '#', '#', '_', '_', '#', '_', '_', '#', '#', '_', '#', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '#'},
            {'#', '_', '#', '_', '_', '#', '#', '_', '#', '#', '_', '#', '_', '_', '#', '#', '_', '#', '#', '#', '#', '#', '_', '#', '_', '#'},
            {'#', '_', '#', '#', '_', '#', '_', '_', '_', '_', '_', '#', '_', '#', '#', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '#'},
            {'#', '_', '_', '_', '_', '_', '_', '_', '#', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '#'},
            {'#', '#', '#', '#', '#', '_', '#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '#', '#', '_', '#'},
            {'#', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '#'},
            {'#', '#', '#', '#', '_', '#', '#', '_', '#', '#', '_', '#', '_', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
            {'#', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '#'},
            {'#', '_', '#', '_', '_', '#', '_', '_', '#', '_', '_', '#', '_', '_', '#', '_', '#', '#', '#', '#', '#', '#', '#', '#', '_', '#'},
            {'#', '_', '#', '_', '#', '#', '_', '#', '#', '_', '#', '#', '#', '_', '#', '_', '#', '_', '_', '_', '_', '_', '_', '#', '_', '#'},
            {'#', '_', '#', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '#', '_', '#', '_', '#', '#', '#', '#', '_', '#', '_', '#'},
            {'#', '_', '_', '_', '_', '#', '_', '_', '#', '_', '_', '#', '#', '_', '#', '_', '#', '_', '_', '_', '_', '#', '_', '#', '_', '#'},
            {'#', '_', '#', '#', '#', '#', '#', '_', '#', '#', '_', '#', '_', '_', '#', '_', '#', '#', '#', '#', '#', '#', '_', '#', '_', '#'},
            {'#', '_', '_', '_', '_', '#', '_', '_', '#', '_', '_', '#', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '#', '_', '#'},
            {'#', '_', '#', '#', '#', '#', '_', '_', '#', '_', '_', '#', '_', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '_', '#'},
            {'#', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '#', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '_', '#'},
            {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}};
};

Spielfeld::Spielfeld(char*fn) {
    bild = IMG_Load(fn);
}

void Spielfeld::zeichnen(SDL_Surface *surf) {

    for(int x=0; x<26; x++) {
        for(int y=0; y<24; y++) {

            SDL_Rect bildausschnitt;
            SDL_Rect zielposition;
            switch (spielfeld[y][x]){
                case'#': bildausschnitt = {x: 0, y: 0, w:32, h:32}; break;
                case'_': bildausschnitt = {x: 0, y: 64, w:32, h:32}; break;
            }

            zielposition = {x: x*32, y: y*32, w:32, h:32};
            SDL_BlitSurface(bild, &bildausschnitt, surf, &zielposition);
    }}
}

bool Spielfeld::free(int y, int x)
{
    return spielfeld[y][x] != '#';
}

#endif // SPIELFELD_H_INCLUDED
